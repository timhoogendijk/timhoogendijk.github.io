!function(){"use strict";var e=document.querySelector("[data-synthesize]"),t=e.querySelector('button[data-btn="play-pause"]'),n=e.querySelector('button[data-btn="stop"]'),o=e.querySelector('[data-ui="volume-slider"]'),a=e.querySelector('[data-ui="pitch-slider"]'),c=e.querySelector('[data-ui="rate-slider"]'),r=e.querySelector(".debug-msg"),s=e.querySelector("#voices-select"),l=e.querySelector("#synth-text");a.value=1,c.value=1,"speechSynthesis"in window||(r.textContent="This browser does not support speechSynthesis",alert(r.textContent),console.error(r.textContent));var i=new SpeechSynthesisUtterance;i.text=l.value.trim(),i.lang="nl-NL",i.pitch=parseFloat(a.value),i.rate=parseFloat(c.value),i.volume=parseFloat(o.value);var u=!1;function d(e){var t=[];e.forEach(function(e,n){var o=e.lang,a=e.name;o=o.replace("_","-"),t.push('<option value="'.concat(n,'" data-lang="').concat(o,'" data-name="').concat(a,'">').concat(a," (").concat(o,")</option>"))}),s.innerHTML=t.join("")}function h(e,t){var n=s.querySelector("option".concat(e)),o=s.querySelector("option".concat(t)),a=null;(a=n||(o||s.querySelector("option")))&&(a.setAttribute("selected",""),i.voice=g[parseInt(a.value)],u=i.voice.localService,console.log("isUsingLocalVoice",u))}var v=!1,g=speechSynthesis.getVoices();console.log("voices",g.length),"onvoiceschanged"in speechSynthesis?speechSynthesis.onvoiceschanged=function(e){v?console.log("voicesChanged, but voice already set"):(g=speechSynthesis.getVoices()).length>0&&(d(g),h('[data-name="Claire"][data-lang="nl-NL"]','[data-lang="nl-NL"]'),v=!0)}:g.length>0&&(d(g),h('[data-name="Claire"][data-lang="nl-NL"]','[data-lang="nl-NL"]'),v=!0),s.addEventListener("change",function(e){console.log(e.currentTarget.value),i.voice=g[parseInt(e.currentTarget.value)],u=i.voice.localService,console.log("isUsingLocalVoice",u)}),t.addEventListener("click",function(e){if(speechSynthesis.pending)return r.textContent="synth: is pending, please wait",void console.log(r.textContent);if(!speechSynthesis.speaking){if(i.text!=l.value.trim()&&(i.text=l.value.trim()),0==i.text.length)return r.textContent="warning: no text found",l.focus(),void console.log(r.textContent);r.textContent="synth: start speaking",console.log(r.textContent),speechSynthesis.speak(i)}}),n.addEventListener("click",function(e){p&&(clearInterval(p),p=null),speechSynthesis.cancel()}),o.addEventListener("change",function(e){return function(e){console.log("change volume to",parseFloat(e.currentTarget.value)),i.volume=parseFloat(e.currentTarget.value)}(e)}),a.addEventListener("change",function(e){return function(e){console.log("change pitch to",parseFloat(e.currentTarget.value)),i.pitch=parseFloat(e.currentTarget.value)}(e)}),c.addEventListener("change",function(e){return function(e){console.log("change rate to",parseFloat(e.currentTarget.value)),i.rate=parseFloat(e.currentTarget.value)}(e)});var p=null;i.addEventListener("start",function(e){r.textContent="utterance: start",console.log(r.textContent),p||(p=setInterval(function(){speechSynthesis.speaking&&!u&&speechSynthesis.resume()},100))}),i.addEventListener("pause",function(e){r.textContent="utterance: pause",console.log(r.textContent,speechSynthesis)}),i.addEventListener("resume",function(e){r.textContent="utterance: resume",console.log(r.textContent)}),i.addEventListener("end",function(e){r.textContent="utterance: end (took ".concat(e.elapsedTime,"ms})"),p&&(clearInterval(p),p=null)}),i.onerror=function(e){console.log(e.code)},i.addEventListener("error",function(e){r.textContent="synth: error (".concat(e.error,")"),console.log(r.textContent,e),console.log("voice?",i.voice),p&&(clearInterval(p),p=null),speechSynthesis.cancel()}),i.addEventListener("boundary",function(e){r.textContent="utterance: boundary (charIndex ".concat(e.charIndex," @").concat(e.elapsedTime,"ms)")}),window.addEventListener("beforeunload",function(e){console.log("onbeforeunload"),speechSynthesis.speaking&&speechSynthesis.pause(),speechSynthesis.cancel()})}();
